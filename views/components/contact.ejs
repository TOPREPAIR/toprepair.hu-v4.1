<trb-section>
    <trb-stack>
        <trb-title level="2" class="trb-title--uppercasegrey">Kapcsolat</trb-title>
        <trb-grid>
            <% contactData.forEach(contact => { %>
                <trb-stack style="gap:var(--trb-space--3); grid-template-rows: auto auto auto 1fr">
                    <trb-title level="3"><%- contact.city %></trb-title>
                    <trb-stack style="gap:var(--trb-space--3)">
                        <trb-title level="4">Időpontfoglalás</trb-title>
                        <trb-stack style="gap:var(--trb-space--2)">
                            <trb-anchor href="tel:<%- contact.phoneNumber %>">
                                <trb-icon icon="phone" style="color:var(--trb-red)"></trb-icon>
                                <trb-text><b><%- contact.phoneNumber %></b></trb-text>
                            </trb-anchor>
                            <trb-anchor>
                                <trb-icon icon="clock" style="color:var(--trb-red)"></trb-icon>
                                <trb-text>Hétfő-Péntek, 8:00 - 17:00</trb-text>
                            </trb-anchor>
                            <trb-anchor class="isavailable">
                                <trb-icon icon="circle" style="color:var(--trb-red);flex-shrink: 0;"></trb-icon>
                                <trb-text>Jelenleg zárva vagyunk, így időpontfolgalás nem lehetséges.</trb-text>
                            </trb-anchor>
                        </trb-stack>
                    </trb-stack>
                    <trb-stack style="gap:var(--trb-space--3)">
                        <trb-title level="4">Műhely</trb-title>
                        <trb-stack style="gap:var(--trb-space--2)">
                            <trb-anchor>
                                <trb-icon icon="map-marker-alt" style="color:var(--trb-red);  flex-shrink: 0; align-self: baseline"></trb-icon>
                                <trb-text><%- contact.address %></trb-text>
                            </trb-anchor>
                            <trb-anchor>
                                <trb-icon icon="clock" style="color:var(--trb-red)"></trb-icon>
                                <trb-text>Nyitvatartás bejelentkezés alapján</trb-text>
                            </trb-anchor>
                        </trb-stack>
                    </trb-stack>
                    <trb-button style="align-self: end; margin-top:var(--trb-space--2)" text="Megnyitás google mapsben" href="<%- contact.googleMapsLink %>" icon="map-marked-alt" class="trb-button--icon-on-right"></trb-button>
                </trb-stack>
            <% }); %>
            <script async>

                    let now = new Date(),
                    isAvailable = ((now.getHours() >= 8) && (now.getHours() < 17) && (now.getDay() != 0) && (now.getDay() != 6)),
                    $isAvailable = document.querySelectorAll('.isavailable');
        
                if(isAvailable && $isAvailable.length > 0){
                    $isAvailable.forEach(el =>{
                        el.querySelector('trb-icon').style.color = 'var(--trb-green)';
                        el.querySelector('trb-text').textContent = 'Időpontfoglalás lehetséges'
                    });
                }
        
            </script>
        </trb-grid>
    </trb-stack>
</trb-section>
<trb-section style="background-color: var(--trb-red);">
    <trb-grid>
        <trb-anchor href="mailto:toprepair.hu@gmail.com" style="justify-content: center;">
            <trb-stack style="justify-items: center;">
                <trb-icon icon="envelope" class="trb-text-size--5"></trb-icon>
                <trb-text>toprepair.hu@gmail.com</trb-text>
            </trb-stack>
        </trb-anchor>
        <trb-anchor href="https://maps.google.com/maps?cid=10727131549895732878&hl=hu" style="justify-content: center;">
            <trb-stack style="justify-items: center;">
                <trb-icon icon="google" class="trb-text-size--5"></trb-icon>
                <trb-text>TOP REPAIR HUNGARY</trb-text>
            </trb-stack>
        </trb-anchor>
        <trb-anchor href="https://facebook.com/toprepairhungary" style="justify-content: center;">
            <trb-stack style="justify-items: center;">
                <trb-icon icon="facebook" class="trb-text-size--5"></trb-icon>
                <trb-text>@toprepairhungary</trb-text>
            </trb-stack>
        </trb-anchor>
    </trb-grid>
</trb-section>